<!doctype html>
<html dir="rtl" lang="ar">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</title>
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
                margin: 0;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                text-align: center;
                padding: 20px;
                box-sizing: border-box;
            }
            .container {
                background: rgba(255, 255, 255, 0.1);
                padding: 40px 30px;
                border-radius: 20px;
                backdrop-filter: blur(10px);
                box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
                max-width: 400px;
            }
            h1 {
                font-size: 24px;
                margin-bottom: 20px;
                font-weight: 600;
            }
            p {
                font-size: 16px;
                line-height: 1.6;
                margin-bottom: 20px;
            }
            .spinner {
                border: 4px solid rgba(255, 255, 255, 0.3);
                border-top: 4px solid white;
                border-radius: 50%;
                width: 50px;
                height: 50px;
                animation: spin 1s linear infinite;
                margin: 20px auto;
            }
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            a {
                color: white;
                text-decoration: none;
                background: rgba(255, 255, 255, 0.2);
                padding: 12px 24px;
                border-radius: 8px;
                display: inline-block;
                margin-top: 15px;
                font-weight: 500;
                transition: background 0.3s;
            }
            a:hover {
                background: rgba(255, 255, 255, 0.3);
            }
        </style>
        <script>
            function openApp() {
                // Try multiple methods to open the app
                const appUrl = "{{ app_url }}";
                const fallbackUrl = "{{ web_fallback }}";
                
                // Method 1: Try direct window.location (works better on mobile)
                try {
                    window.location.href = appUrl;
                } catch (e) {
                    console.log('Direct navigation failed:', e);
                }
                
                // Method 2: Create invisible link and click it
                const link = document.createElement('a');
                link.href = appUrl;
                link.style.display = 'none';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // Method 3: Also try iframe as fallback
                const iframe = document.createElement('iframe');
                iframe.style.display = 'none';
                iframe.src = appUrl;
                document.body.appendChild(iframe);
                setTimeout(() => {
                    if (document.body.contains(iframe)) {
                        document.body.removeChild(iframe);
                    }
                }, 1000);
                
                // Detect if app didn't open after 3 seconds
                const startTime = Date.now();
                setTimeout(function() {
                    // If page is still visible after 3s, app probably didn't open
                    if (Date.now() - startTime >= 2900) {
                        document.getElementById('spinner').style.display = 'none';
                        document.getElementById('loading-text').style.display = 'none';
                        document.getElementById('fallback-message').style.display = 'block';
                    }
                }, 3000);
            }
            window.onload = openApp;
        </script>
    </head>
    <body>
        <div class="container">
            <h1>ğŸ‰ Ø§Ù„Ø¯ÙØ¹ ØªÙ… Ø¨Ù†Ø¬Ø§Ø­</h1>
            <div class="spinner" id="spinner"></div>
            <p id="loading-text">Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚...</p>
            <p id="fallback-message" style="display: none; font-size: 16px; margin: 20px 0;">Ù„Ù… ÙŠÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ØŸ</p>
            <a href="{{ app_url }}" style="margin-bottom: 10px;">Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</a>
            <a href="{{ web_fallback }}" style="background: rgba(255, 255, 255, 0.15);">Ø£Ùˆ Ø­Ù…Ù‘Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø±</a>
        </div>
    </body>
</html>
